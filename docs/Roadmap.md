# ğŸš€ å‰ç«¯æ¸²æŸ“æ¶æ„æ¼”è¿›è§„åˆ’ï¼ˆSSG â†’ RSC â†’ ISR â†’ SSRï¼‰

## ğŸ¯ æ€»ä½“ç›®æ ‡

åˆ†é˜¶æ®µå®ç°ä¸€å¥—å¯æ¼”è¿›çš„ React 19 æ¶æ„ï¼Œå®Œæ•´æ¼”è¿›è·¯å¾„ï¼š

1. **Phase 0-1ï¼šçº¯ SSGï¼ˆStatic Site Generationï¼‰** â€”â€” å®ç°é™æ€æ„å»ºä¸éƒ¨ç½²
2. **Phase 2-2.5ï¼šå¼•å…¥ RSCï¼ˆReact Server Componentsï¼‰** â€”â€” å‡å°‘ JS ä½“ç§¯ï¼Œæ”¯æŒå¼‚æ­¥/Fragment/åµŒå¥—
3. **Phase 3ï¼šåŠ å…¥ ISRï¼ˆIncremental Static Regenerationï¼‰** â€”â€” æ”¯æŒå¢é‡å†ç”Ÿ
4. **Phase 4ï¼šè¡¥å…… SSRï¼ˆServer-Side Renderingï¼‰** â€”â€” æ”¯æŒå®æ—¶åŠ¨æ€é¡µé¢
5. **Phase 5ï¼šStreaming SSR** â€”â€” æµå¼ä¼ è¾“ï¼Œæ”¹å–„ TTFB
6. **Phase 6ï¼šå®Œæ•´ RSC** â€”â€” Suspense + Server Actions
7. **Phase 7ï¼šPPRï¼ˆPartial Prerenderingï¼‰** â€”â€” æ··åˆé™æ€å’ŒåŠ¨æ€å†…å®¹ï¼Œæœ€ä½³æ€§èƒ½

æ¯é˜¶æ®µéƒ½ä¿è¯å¯ç°åº¦ã€å¯è§‚æµ‹ã€å¯å›æ»šã€‚

---

## ğŸ“ MVP å­¦ä¹ ç‰ˆï¼ˆç®€åŒ–è·¯çº¿ï¼‰

> **è¯´æ˜**ï¼šæœ¬é¡¹ç›®æä¾›ä¸¤æ¡è·¯çº¿ â€”â€” **MVP å­¦ä¹ ç‰ˆ**å’Œ**ç”Ÿäº§å®Œæ•´ç‰ˆ**ã€‚å¦‚æœæ˜¯å­¦ä¹ ç›®çš„ï¼Œå»ºè®®ä» MVP ç‰ˆå¼€å§‹ã€‚

### æŠ€æœ¯æ ˆé€‰æ‹©

- **æ„å»ºå·¥å…·**: Webpack 5
- **React**: React 19 (RC)
- **TypeScript**: 5.x
- **è¿è¡Œæ—¶**: Node.js 18+
- **åŒ…ç®¡ç†**: pnpm

### MVP-Phase 0ï¼šæœ€å° SSG ç³»ç»Ÿï¼ˆ1-2 å¤©ï¼‰âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼š30 åˆ†é’Ÿå†…è·‘é€šç¬¬ä¸€ä¸ªé™æ€é¡µé¢

**æ ¸å¿ƒä»»åŠ¡**ï¼š
- [x] å®‰è£…åŸºç¡€ä¾èµ–ï¼šreact@rc, react-dom@rc, webpack, typescript
- [x] å»ºç«‹é¡¹ç›®ç»“æ„ï¼š`src/pages/`, `src/lib/`, `tsconfig.json`
- [x] å®ç°æ ¸å¿ƒæ„å»ºè„šæœ¬ï¼š`src/lib/builder.ts`ï¼ˆçº¦ 130 è¡Œï¼‰
  - è¯»å–è·¯ç”±é…ç½®
  - è°ƒç”¨ `renderToString()` ç”Ÿæˆ HTML
  - å†™å…¥ `dist/` ç›®å½•
- [x] æ·»åŠ ä¸€ä¸ªç®€å•é¡µé¢ï¼š`src/pages/index.tsx`
- [x] å®ç°å‘½ä»¤ï¼š`pnpm build` â†’ ç”Ÿæˆ `dist/index.html`
- [x] åˆ›å»º README.md é¡¹ç›®æ–‡æ¡£

**ç®€åŒ–ç‚¹**ï¼š
- âŒ æ—  CDNã€S3ï¼ˆç›´æ¥æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼‰
- âŒ æ— å¤æ‚è·¯ç”±ï¼ˆå…ˆæ”¯æŒ 3-5 ä¸ªé™æ€è·¯ç”±ï¼‰
- âŒ æ— æŒ‡çº¹åŒ–ã€æ— ä»£ç åˆ†å‰²ï¼ˆå…ˆç”¨æœ€ç®€å•çš„ bundleï¼‰

**éªŒæ”¶**ï¼š
```bash
pnpm build
open dist/index.html  # æµè§ˆå™¨èƒ½çœ‹åˆ° React æ¸²æŸ“çš„å†…å®¹
```

---

### MVP-Phase 1ï¼šClient å²›å±¿ + Hydrationï¼ˆ2-3 å¤©ï¼‰âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šç†è§£æœåŠ¡ç«¯/å®¢æˆ·ç«¯æ¸²æŸ“è¾¹ç•Œ

**æ ¸å¿ƒä»»åŠ¡**ï¼š
- [x] æ·»åŠ äº¤äº’ç»„ä»¶ï¼š`src/components/Counter.client.tsx`ï¼ˆå¸¦ `"use client"` æ ‡è®°ï¼‰
- [x] é…ç½® Webpack åŒå…¥å£ï¼š
  - Server å…¥å£ï¼šç”¨äºæ„å»ºæ—¶æ¸²æŸ“
  - Client å…¥å£ï¼šç”¨äºæµè§ˆå™¨ç«¯ hydration
- [x] åœ¨ç”Ÿæˆçš„ HTML ä¸­æ³¨å…¥ `<script>` æ ‡ç­¾
- [x] å®ç°å®¢æˆ·ç«¯ hydrationï¼š`hydrateRoot()`
- [x] æ·»åŠ æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼ˆserveï¼‰
- [x] ä¿®æ”¹ webpack.config.js â†’ webpack.config.cjsï¼ˆES module å…¼å®¹ï¼‰

**å…³é”®ä»£ç ç»“æ„**ï¼š
```
src/
  pages/
    index.tsx              # é¡µé¢ï¼ˆServer Componentï¼‰
  components/
    Counter.client.tsx     # å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆå¸¦äº¤äº’ï¼‰
  entries/
    server.tsx             # æ„å»ºæ—¶å…¥å£
    client.tsx             # æµè§ˆå™¨å…¥å£ï¼ˆhydrationï¼‰
  lib/
    builder.ts             # æ„å»ºè„šæœ¬
webpack.config.js          # åŒå…¥å£é…ç½®
```

**ç®€åŒ–ç‚¹**ï¼š
- âŒ ä¸åšä»£ç åˆ†å‰²ï¼ˆæ‰€æœ‰ client ç»„ä»¶æ‰“æˆä¸€ä¸ª bundleï¼‰
- âŒ ä¸åšæŒ‰éœ€åŠ è½½ï¼ˆå…¨é‡ hydrationï¼‰

**éªŒæ”¶ç»“æœ**ï¼šâœ… å…¨éƒ¨é€šè¿‡
- âœ… é¡µé¢åˆå§‹ HTML ç”±æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆæŸ¥çœ‹ç½‘é¡µæºä»£ç èƒ½çœ‹åˆ°å®Œæ•´ Counter HTMLï¼‰
- âœ… äº¤äº’åŠŸèƒ½æ­£å¸¸ï¼ˆCounter ç‚¹å‡»èƒ½è®¡æ•°ï¼Œstate å®æ—¶æ›´æ–°ï¼‰
- âœ… æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º hydration æ—¥å¿—
- âœ… å®¢æˆ·ç«¯ JS bundle æˆåŠŸåŠ è½½ï¼ˆdist/assets/client.js ~1MB å¼€å‘æ¨¡å¼ï¼‰
- âœ… æœ¬åœ°æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ï¼ˆhttp://localhost:3000ï¼‰

**æ„å»ºäº§ç‰©**ï¼š
- `dist/index.html`: 2.6KBï¼ˆå«æœåŠ¡ç«¯æ¸²æŸ“çš„å®Œæ•´ HTMLï¼‰
- `dist/assets/client.js`: 1.0MBï¼ˆå¼€å‘æ¨¡å¼ï¼Œæœªå‹ç¼©ï¼‰
- `dist/assets/client.js.map`: 1.2MBï¼ˆSource mapï¼‰

**æ„å»ºæ—¶é—´**ï¼š
- Webpack å®¢æˆ·ç«¯æ‰“åŒ…ï¼š~3.6s
- SSG HTML ç”Ÿæˆï¼š~32ms
- æ€»è®¡ï¼š~3.7s

---

### MVP-Phase 2ï¼šç®€åŒ–ç‰ˆ RSCï¼ˆ3-5 å¤©ï¼‰âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šæ‰‹å†™ç®€åŒ–çš„ RSC å®ç°ï¼Œç†è§£ Server Components æ ¸å¿ƒåŸç†

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Server Component åœ¨æ„å»ºæ—¶æ‰§è¡Œï¼Œåªè¾“å‡ºæ•°æ®/HTML
- Client Component åœ¨æµè§ˆå™¨æ‰§è¡Œ
- å®ç°ç®€åŒ–çš„ RSC Payloadï¼ˆJSON æ ¼å¼ï¼‰

**æ ¸å¿ƒä»»åŠ¡**ï¼š
- [x] å®šä¹‰ RSC ç±»å‹ç³»ç»Ÿï¼ˆRSCNode, RSCPayloadï¼‰
- [x] å®ç°ç»„ä»¶æ ‘åˆ†æå™¨ï¼šåŒºåˆ† Server å’Œ Client ç»„ä»¶
- [x] å®ç° Server Component åºåˆ—åŒ–å™¨ï¼š
  - åœ¨æ„å»ºæ—¶æ‰§è¡Œç»„ä»¶
  - æ”¯æŒ `async` Server Componentsï¼ˆç®€åŒ–ç‰ˆï¼‰
  - åºåˆ—åŒ–ä¸º JSONï¼ˆç®€åŒ–ç‰ˆ RSC Payloadï¼‰
- [x] å®ç° Client ä¾§ååºåˆ—åŒ–å™¨ï¼š
  - è¯»å– RSC Payload
  - é‡å»ºç»„ä»¶æ ‘
  - åª hydrate Client Components
- [x] æ›´æ–°æ„å»ºæµç¨‹ï¼šç”Ÿæˆ rsc.json
- [x] éªŒè¯ bundle size å‡å°

**ç®€åŒ–ç‚¹**ï¼ˆvs å®Œæ•´ç‰ˆ RSCï¼‰ï¼š
- âœ… å®ç°ï¼šç»„ä»¶æ ‘åºåˆ—åŒ–ã€Server/Client è¾¹ç•Œ
- âœ… å®ç°ï¼šé™æ€ async/awaitï¼ˆæ„å»ºæ—¶ï¼‰
- âŒ ä¸å®ç°ï¼šStreamingï¼ˆæµå¼ä¼ è¾“ï¼‰
- âŒ ä¸å®ç°ï¼šè¿è¡Œæ—¶ Suspense
- âŒ ä¸å®ç°ï¼šServer Actions
- âŒ ä¸å®ç°ï¼šå®Œæ•´çš„ RSC Wire Format

**æŠ€æœ¯æ¶æ„**ï¼š
```
æ„å»ºæ—¶ï¼š
  1. Webpack æ‰“åŒ… Client Components â†’ client-rsc.js
  2. RSC åºåˆ—åŒ–å™¨å¤„ç†é¡µé¢ â†’ rsc.json
  3. ç”Ÿæˆ HTMLï¼ˆå¼•ç”¨ rsc.jsonï¼‰

æµè§ˆå™¨ï¼š
  1. åŠ è½½ HTML + rsc.json
  2. é‡å»ºç»„ä»¶æ ‘ï¼ˆServer éƒ¨åˆ†ç›´æ¥æ’å…¥ï¼ŒClient éƒ¨åˆ†åŠ è½½ç»„ä»¶ï¼‰
  3. åª hydrate Client Components
```

**æ–°å¢æ–‡ä»¶**ï¼š
- `src/lib/rsc-types.ts` - RSC ç±»å‹å®šä¹‰ï¼ˆ110 è¡Œï¼‰
- `src/lib/rsc-serializer.ts` - RSC åºåˆ—åŒ–å™¨ï¼ˆ293 è¡Œï¼‰
- `src/lib/rsc-deserializer.ts` - RSC ååºåˆ—åŒ–å™¨ï¼ˆ145 è¡Œï¼‰
- `src/entries/client-rsc.tsx` - RSC å®¢æˆ·ç«¯å…¥å£ï¼ˆ80 è¡Œï¼‰
- `docs/RSC-Architecture.md` - RSC æ¶æ„æ–‡æ¡£

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `src/lib/builder.ts` - å‡çº§ä¸º RSC æ„å»ºæ¨¡å¼
- `webpack.config.cjs` - æ›´æ–°ä¸º RSC å®¢æˆ·ç«¯å…¥å£
- `src/components/Counter.client.tsx` - æ·»åŠ  `__componentPath` æ ‡è®°

**éªŒæ”¶ç»“æœ**ï¼šâœ… å…¨éƒ¨é€šè¿‡
- âœ… Server Components ä»£ç **ä¸åœ¨**å®¢æˆ·ç«¯ bundle ä¸­
  - éªŒè¯ï¼š`grep -q "Hello from React 19 SSG" dist/assets/client-rsc.js` â†’ ä¸åŒ…å« âœ…
- âœ… Client Components æ­£ç¡®æ‰“åŒ…åˆ° client-rsc.js
  - éªŒè¯ï¼š`grep -c "Counter" dist/assets/client-rsc.js` â†’ 35 æ¬¡å¼•ç”¨ âœ…
- âœ… rsc.json æ­£ç¡®åºåˆ—åŒ–ç»„ä»¶æ ‘
  - åŒ…å« 1 ä¸ªæ ¹ element èŠ‚ç‚¹
  - åŒ…å«å¤šä¸ª text èŠ‚ç‚¹
  - åŒ…å« 1 ä¸ª client-placeholder èŠ‚ç‚¹ï¼ˆCounter_0ï¼‰
- âœ… å®¢æˆ·ç«¯æˆåŠŸåŠ è½½ rsc.json
  - Network é¢æ¿æ˜¾ç¤º rsc.json è¯·æ±‚æˆåŠŸ
- âœ… ç»„ä»¶æ ‘é‡å»ºæˆåŠŸ
  - æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºï¼š"ğŸŒ³ ç»„ä»¶æ ‘å·²é‡å»º"
- âœ… Counter ç»„ä»¶ hydration æˆåŠŸ
  - æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºï¼š"âœ¨ Hydration å®Œæˆï¼RSC å®¢æˆ·ç«¯å·²å°±ç»ª"
- âœ… Counter äº¤äº’åŠŸèƒ½æ­£å¸¸
  - + / - æŒ‰é’®ç‚¹å‡»æ­£å¸¸
  - æ•°å­—å®æ—¶æ›´æ–°
- âœ… æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºå®Œæ•´ RSC å¯åŠ¨æ—¥å¿—
  - ğŸš€ RSC Client å¯åŠ¨
  - ğŸ“¦ Client Components å·²æ³¨å†Œ
  - ğŸ“¥ RSC Payload å·²åŠ è½½
  - ğŸŒ³ ç»„ä»¶æ ‘å·²é‡å»º
  - ğŸ’§ å¼€å§‹ hydration
  - âœ¨ Hydration å®Œæˆ

**æ„å»ºäº§ç‰©**ï¼š
- `dist/index.html`: 2.6KBï¼ˆæœåŠ¡ç«¯æ¸²æŸ“çš„ HTMLï¼‰
- `dist/rsc.json`: 5.5KBï¼ˆRSC Payloadï¼Œç»„ä»¶æ ‘ç»“æ„ï¼‰
- `dist/assets/client-rsc.js`: 1.0MBï¼ˆå¼€å‘æ¨¡å¼ï¼Œä»…åŒ…å« Client Componentsï¼‰
- `dist/assets/client-rsc.js.map`: 1.2MBï¼ˆSource mapï¼‰

**æ„å»ºæ—¶é—´**ï¼š
- Webpack å®¢æˆ·ç«¯æ‰“åŒ…ï¼š~4.0s
- SSG HTML ç”Ÿæˆ + RSC åºåˆ—åŒ–ï¼š~58ms
- æ€»è®¡ï¼š~4.1s

**RSC Payload ç»“æ„ç¤ºä¾‹**ï¼š
```json
{
  "version": "1.0",
  "tree": [
    {
      "$$type": "element",
      "tag": "div",
      "props": { "style": {...} },
      "children": [
        { "$$type": "text", "content": "ğŸš€ Hello from React 19 SSG!" },
        {
          "$$type": "client-placeholder",
          "id": "Counter_0",
          "componentPath": "src/components/Counter.client.tsx",
          "props": {}
        }
      ]
    }
  ],
  "clientComponents": {
    "Counter_0": "src/components/Counter.client.tsx"
  }
}
```

**å­¦ä¹ æˆæœ**ï¼š
- âœ… æ·±å…¥ç†è§£ RSC ç»„ä»¶æ ‘åºåˆ—åŒ–åŸç†
- âœ… æŒæ¡ Server/Client ç»„ä»¶è¾¹ç•Œåˆ’åˆ†
- âœ… å®ç° Client Component è‡ªåŠ¨æ£€æµ‹æœºåˆ¶
- âœ… ç†è§£é€‰æ‹©æ€§ Hydration vs å…¨æ ‘ Hydration
- âœ… æŒæ¡ RSC Payload æ ¼å¼è®¾è®¡ï¼ˆElementã€Textã€ClientPlaceholderï¼‰
- âœ… ç†è§£ç®€åŒ–ç‰ˆ RSC vs å®Œæ•´ç‰ˆ RSC çš„åŒºåˆ«

**å®Œæˆæ—¥æœŸ**ï¼š2025-11-08ï¼ˆå®é™…ç”¨æ—¶ 1 å¤©ï¼‰

**å‚è€ƒèµ„æ–™**ï¼š
- React å®˜æ–¹ RSC Demo: https://github.com/reactjs/server-components-demo
- RSC RFC: https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md
- æ¶æ„è®¾è®¡ï¼šè§ `docs/RSC-Architecture.md`

---

### MVP-Phase 2.5ï¼šå¢å¼ºé™æ€ RSCï¼ˆå¯é€‰ï¼‰âœ… å·²å®Œæˆ

**å®Œæˆæ—¥æœŸ**ï¼š2025-11-11

**ç›®æ ‡**ï¼šåœ¨ç®€åŒ–ç‰ˆåŸºç¡€ä¸Šå¢å¼ºåŠŸèƒ½ï¼Œä½†ä»ä¿æŒé™æ€æ„å»º

**å·²å®ŒæˆåŠŸèƒ½**ï¼š
- [x] æ”¯æŒæ„å»ºæ—¶çš„ async Server Components
  - Server Component å¯ä»¥ `await fetch()`, `await fs.readFile()` ç­‰
  - æ„å»ºæ—¶ç­‰å¾…æ‰€æœ‰å¼‚æ­¥å®Œæˆ
- [x] ä¼˜åŒ– RSC Payload æ ¼å¼
  - æ”¯æŒ Fragment èŠ‚ç‚¹ç±»å‹ï¼ˆReact.Fragmentã€`<>...</>`ï¼‰
  - æ›´æ¥è¿‘çœŸå® RSC Wire Format
- [x] æ”¯æŒåµŒå¥— Client Components
  - Client Component å¯ä»¥åŒ…å«å…¶ä»– Client Components
  - è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»å’Œ children ä¼ é€’
- [x] åˆ›å»º RSC Payload åˆ° HTML è½¬æ¢å™¨
  - ä»åºåˆ—åŒ–çš„ payload ç”Ÿæˆ SEO å‹å¥½çš„ HTML
  - è§£å†³ renderToString ä¸æ”¯æŒå¼‚æ­¥çš„é—®é¢˜

**æ–°å¢æ–‡ä»¶**ï¼š
- `src/lib/rsc-to-html.ts` - RSC Payload åˆ° HTML è½¬æ¢å™¨
- `src/components/AsyncData.server.tsx` - å¼‚æ­¥ Server Component ç¤ºä¾‹
- `src/components/FragmentList.tsx` - Fragment ä½¿ç”¨ç¤ºä¾‹
- `src/components/InteractiveCard.client.tsx` - å¯åµŒå¥—çš„ Client Component
- `docs/Phase-2.5-Summary.md` - å®Œæ•´æ€»ç»“æ–‡æ¡£

**æ„å»ºäº§ç‰©**ï¼š
- `index.html`: 3.7KBï¼ˆä» RSC payload ç”Ÿæˆï¼‰
- `rsc.json`: 21KBï¼ˆåŒ…å«å¼‚æ­¥æ•°æ®çš„å®Œæ•´ç»„ä»¶æ ‘ï¼‰
- `client-rsc.js`: 1.03MBï¼ˆå¼€å‘æ¨¡å¼ï¼‰

**æ„å»ºæ—¶é—´**ï¼š
- Webpack å®¢æˆ·ç«¯æ‰“åŒ…ï¼š~4.8s
- RSC åºåˆ—åŒ– + HTML ç”Ÿæˆï¼š~149ms
- æ€»è®¡ï¼š~5.0s

**å­¦ä¹ æˆæœ**ï¼š
- âœ… æ·±å…¥ç†è§£ RSC å¼‚æ­¥åºåˆ—åŒ–åŸç†
- âœ… æŒæ¡å¤æ‚èŠ‚ç‚¹ç±»å‹å¤„ç†ï¼ˆFragmentã€åµŒå¥—ç»„ä»¶ï¼‰
- âœ… ç†è§£ RSC Payload åˆ° HTML çš„è½¬æ¢æµç¨‹
- âœ… æŒæ¡äº† 80%+ çš„ RSC æ ¸å¿ƒæ¦‚å¿µ

**å®Œæˆåº¦**ï¼šâ­â­â­â­â­ï¼ˆå®Œå…¨å®ç°ï¼‰

---

### MVP-Phase 3-4ï¼šæš‚æ—¶è·³è¿‡ â­ï¸

**å»ºè®®**ï¼š
- ISR å’Œ SSR éœ€è¦æœåŠ¡ç«¯è¿è¡Œæ—¶ï¼Œå¤æ‚åº¦è¾ƒé«˜
- å·²å®Œæˆ MVP-Phase 0-2.5ï¼Œå……åˆ†ç†è§£äº† SSG å’Œ RSC åŸç†
- åç»­å¯é€‰æ‹©ï¼š
  - ç»§ç»­æ‰‹å†™ ISR/SSRï¼ˆå·¥ä½œé‡å¤§ï¼Œ1-2 å‘¨ï¼‰
  - è½¬å‘ Next.js å­¦ä¹ ç”Ÿäº§å®è·µï¼ˆæ¨èï¼‰

---

## ğŸ“‹ MVP å¿«é€Ÿå¯åŠ¨æ£€æŸ¥æ¸…å• âœ… å·²å®Œæˆ

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ï¼ˆ5 åˆ†é’Ÿï¼‰âœ…
```bash
node --version    # ç¡®ä¿ >= 18
pnpm --version    # ç¡®ä¿å·²å®‰è£… pnpm
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–ï¼ˆ10 åˆ†é’Ÿï¼‰âœ…
```bash
pnpm add react@rc react-dom@rc
pnpm add -D webpack webpack-cli webpack-dev-server
pnpm add -D @types/react @types/react-dom @types/node
pnpm add -D typescript tsx ts-loader
pnpm add -D html-webpack-plugin
```

### ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹é¡¹ç›®éª¨æ¶ï¼ˆ15 åˆ†é’Ÿï¼‰âœ…
- [x] åˆ›å»º `src/pages/index.tsx`ï¼ˆä¸€ä¸ªç®€å•çš„ React ç»„ä»¶ï¼‰
- [x] åˆ›å»º `src/lib/builder.ts`ï¼ˆæ ¸å¿ƒæ„å»ºè„šæœ¬ï¼‰
- [x] åˆ›å»º `tsconfig.json`
- [x] åœ¨ `package.json` æ·»åŠ è„šæœ¬ï¼š`"build": "tsx src/lib/builder.ts"`
- [x] åˆ›å»º `src/routes.config.ts`ï¼ˆè·¯ç”±é…ç½®ï¼‰
- [x] åˆ›å»º `README.md`ï¼ˆé¡¹ç›®æ–‡æ¡£ï¼‰

### ç¬¬å››æ­¥ï¼šéªŒè¯ï¼ˆ5 åˆ†é’Ÿï¼‰âœ…
```bash
pnpm build          # âœ… æ„å»ºæˆåŠŸï¼ˆ47msï¼‰
ls dist/            # âœ… çœ‹åˆ° index.html
open dist/index.html # âœ… æµè§ˆå™¨æ­£å¸¸æ˜¾ç¤º
```

**éªŒæ”¶ç»“æœ**ï¼š
- âœ… `dist/index.html` å·²ç”Ÿæˆï¼ˆ1.6KBï¼‰
- âœ… æŸ¥çœ‹ç½‘é¡µæºä»£ç èƒ½çœ‹åˆ°å®Œæ•´ HTML
- âœ… æµè§ˆå™¨æ˜¾ç¤ºæ­£å¸¸ï¼ŒåŒ…å«æ ·å¼å’Œå†…å®¹
- âœ… æ— éœ€æœåŠ¡å™¨å³å¯è¿è¡Œ

---

## ğŸ”„ ä» MVP åˆ°ç”Ÿäº§å®Œæ•´ç‰ˆ

å®Œæˆ MVP å­¦ä¹ åï¼Œå¦‚éœ€ç”Ÿäº§éƒ¨ç½²ï¼Œå‚è€ƒä¸‹æ–¹å®Œæ•´ç‰ˆ Roadmapï¼š
- æ·»åŠ  CDNã€S3 éƒ¨ç½²
- æ·»åŠ æŒ‡çº¹åŒ–ã€ä»£ç åˆ†å‰²
- æ·»åŠ ç›‘æ§ã€å‘Šè­¦
- å®ç°å®Œæ•´çš„ ISRã€SSR

---

## ğŸ§± Phase 0ï¼šåœ°åŸºï¼ˆå¯æ¼”è¿›åŸºçº¿ï¼‰

**ç›®æ ‡**ï¼šç¡®ä¿ä»ç¬¬ä¸€å¤©èµ·é¡¹ç›®ç»“æ„èƒ½å…¼å®¹åç»­æ¶æ„æ¼”è¿›ã€‚

### æ ¸å¿ƒçº¦å®š

* `fetchPageData(params)`: çº¯å‡½æ•°ï¼Œå¯åœ¨æ„å»º/å†ç”Ÿ/SSR å¤ç”¨ã€‚
* `render(url, data)`: æ¸²æŸ“æ¥å£ï¼›åç»­å¯æ¢æˆ RSC æ¸²æŸ“å®ç°ã€‚
* `routes.config.ts`: å®šä¹‰è·¯ç”±æ¨¡å¼ä¸å†ç”Ÿç­–ç•¥ã€‚

### äº§ç‰©ç›®å½•

```
dist/
  pages/**/index.html
  assets/**
  manifests/{client.json, rsc.json}
  manifest.json
```

### åŸºç¡€è®¾æ–½

* æ„å»ºå‘½ä»¤ï¼š`build:static` â†’ è¾“å‡º `dist/static`
* éƒ¨ç½²ï¼šä¸Šä¼ è‡³ S3/R2ï¼Œå‰ç½® CDNï¼ˆCloudFront/Cloudflareï¼‰

---

## ğŸ§© Phase 1ï¼šçº¯ SSGï¼ˆæ—  RSCã€æ—  ISRï¼‰

**ç›®æ ‡**ï¼šå…¨ç«™é™æ€åŒ–ä¸Šçº¿ï¼Œç¡®ä¿æè‡´åŠ è½½é€Ÿåº¦ã€‚

### å†…å®¹

* æ¨¡æ¿é™æ€æ¸²æŸ“ï¼Œäº¤äº’ç”¨ `use client` å²›å±¿ã€‚
* ç”Ÿæˆé™æ€ HTML + æŒ‡çº¹åŒ– JS/CSSã€‚

### ç¼“å­˜ç­–ç•¥

* HTML: `Cache-Control: public, s-maxage=86400, max-age=0`
* JS/CSS/Images: `public, max-age=31536000, immutable`

### éªŒæ”¶æ ‡å‡†

* Lighthouse Performance â‰¥ 95
* é¦–å± HTML ç›´å‡ºï¼ŒSEO é€šè¿‡çˆ¬è™«æ£€æµ‹ã€‚

### è§‚æµ‹æŒ‡æ ‡

* CDN å‘½ä¸­ç‡ â‰¥ 95%
* å¹³å‡ TTFB < 100ms

---

## âš™ï¸ Phase 2ï¼šå¼•å…¥ RSCï¼ˆæ„å»ºæœŸæ‰§è¡Œï¼‰

**ç›®æ ‡**ï¼šå‡å°‘å®¢æˆ·ç«¯ JS ä½“ç§¯ï¼Œå°†æ‹¼è£…é€»è¾‘è¿ç§»åˆ° Server Componentsã€‚

### å†…å®¹

* é»˜è®¤ç»„ä»¶å‡ä¸º Server Componentsã€‚
* ä»…äº¤äº’é€»è¾‘ä¿ç•™åœ¨ `*.client.tsx`ã€‚
* æ„å»ºæœºæ‰§è¡Œ RSC â†’ äº§å‡º HTML + `rsc.json`ã€‚

### æ”¹é€ ä¼˜å…ˆçº§

1. Markdown/æ–‡æ¡£æ¸²æŸ“æ¨¡å—ã€‚
2. å†…å®¹èšåˆé¡µï¼ˆåˆ—è¡¨ã€ç›®å½•ã€æ¨èï¼‰ã€‚
3. å¤šè¯­è¨€æ¨¡æ¿æ‹¼è£…ã€‚

### éªŒæ”¶æ ‡å‡†

* JS Bundle å‡å°‘ â‰¥ 30%
* Hydration æ—¶é—´ä¸‹é™ â‰¥ 40%

### é£é™©æ§åˆ¶

* ç¬¬ä¸‰æ–¹åº“åªæ”¯æŒæµè§ˆå™¨ï¼šä»…é™ client ç»„ä»¶ä½¿ç”¨ã€‚

---

## ğŸ”„ Phase 3ï¼šåŠ å…¥ ISRï¼ˆå¢é‡å†ç”Ÿï¼‰

**ç›®æ ‡**ï¼šæ”¯æŒå†…å®¹æ›´æ–°è‡ªåŠ¨å†ç”Ÿï¼Œæ— éœ€å®æ—¶æ¸²æŸ“ã€‚

### è§¦å‘æ–¹å¼

1. **SWR è§¦å‘**ï¼š

   * HTML å“åº”å¤´ï¼š`Cache-Control: public, s-maxage=300, stale-while-revalidate=86400`
   * è¿‡æœŸæ—¶åå°å†ç”Ÿæ–°é¡µé¢ã€‚

2. **Webhook è§¦å‘**ï¼š

   * CMS/DB æ›´æ–° â†’ è§¦å‘å†ç”Ÿé˜Ÿåˆ— â†’ è°ƒç”¨ `fetchPageData + renderRSC()`ã€‚
   * S3 åŸå­æ›¿æ¢ + CDN ç²¾ç¡®è½¯æ¸…ã€‚

### å†ç”Ÿæµç¨‹

* å†ç”Ÿä»»åŠ¡ â†’ æ¸²æŸ“ HTML â†’ ä¸Šä¼ ä¸´æ—¶å¯¹è±¡ â†’ éªŒè¯é€šè¿‡ååˆ‡æ¢ç‰ˆæœ¬ã€‚

### éªŒæ”¶æ ‡å‡†

* æ›´æ–°å»¶è¿Ÿ â‰¤ 60 ç§’ï¼ˆWebhook æ¨¡å¼ï¼‰
* å†ç”Ÿå¤±è´¥ç‡ < 1%

### é£é™©ä¸æ²»ç†

* é¿å…å†ç”ŸæƒŠç¾¤ï¼šåŠ  route çº§é”ã€‚
* æ§åˆ¶å†ç”Ÿé¢‘ç‡ï¼Œé˜Ÿåˆ—ç›‘æ§ã€‚

---

## ğŸ–¥ï¸ Phase 4ï¼šè¡¥ SSRï¼ˆServer-Side Renderingï¼‰æœåŠ¡ç«¯æ¸²æŸ“

**ç›®æ ‡**ï¼šä¸ºå°éƒ¨åˆ†éœ€è¦å®æ—¶è®¡ç®—çš„é¡µé¢ï¼ˆå¦‚ /dashboardã€/checkoutï¼‰æä¾› SSRã€‚

### è·¯ç”±æ¨¡å¼é…ç½®

```ts
export const rules = [
  { pattern: '/', mode: 'static', revalidate: 300 },
  { pattern: '/blog/[slug]', mode: 'static', revalidate: 600 },
  { pattern: '/dashboard/**', mode: 'ssr' },
  { pattern: '/api/**', mode: 'ssr' },
  { pattern: '/checkout/**', mode: 'ssr' },
];
```

### äº§ç‰©

* `dist/static` â†’ é™æ€é¡µé¢ (SSG+RSC+ISR)
* `dist/server` â†’ SSR è¿è¡ŒåŒ… (Lambda/Workers/Node)

### CDN åˆ†æµ

| Path           | Origin | Cache        | è¯´æ˜                |
| -------------- | ------ | ------------ | ----------------- |
| `/api/*`       | SSR æº  | no-store     | æ¥å£/Server Actions |
| `/dashboard/*` | SSR æº  | no-store     | ç™»å½•é¡µ/æ§åˆ¶å°           |
| `/*`           | S3 é™æ€æº | s-maxage=300 | é»˜è®¤é™æ€å‘½ä¸­            |

### éªŒæ”¶æ ‡å‡†

* SSR è·¯ç”± TTFB â‰¤ 500ms
* é™æ€å‘½ä¸­ç‡ â‰¥ 95%
* åŠ¨æ€é”™è¯¯ç‡ < 0.5%

---

## ğŸ“Š é˜¶æ®µå¯¹æ¯”ä¸€è§ˆï¼ˆæ›´æ–°ç‰ˆï¼‰

| é˜¶æ®µ      | æ¸²æŸ“æ¨¡å¼        | æ¸²æŸ“æ—¶æœº      | åŠ¨æ€èƒ½åŠ›  | æµå¼ä¼ è¾“ | æ›´æ–°æ–¹å¼        | å¤æ‚åº¦     |
| ------- | ----------- | --------- | ----- | ---- | ----------- | ------- |
| Phase 1 | SSG         | æ„å»ºæ—¶       | âŒ     | âŒ    | æ‰‹åŠ¨æ„å»º        | â­       |
| Phase 2 | SSG + RSC   | æ„å»ºæ—¶       | âŒ     | âŒ    | æ‰‹åŠ¨æ„å»º        | â­â­      |
| Phase 3 | ISR         | æ„å»ºæ—¶+åå°å†ç”Ÿ | âœ…(ç¦»çº¿) | âŒ    | SWR/Webhook | â­â­â­     |
| Phase 4 | SSR (åŸºç¡€)    | è¯·æ±‚æ—¶       | âœ…(å®æ—¶) | âŒ    | æ¯æ¬¡è¯·æ±‚        | â­â­â­â­    |
| Phase 5 | Streaming   | è¯·æ±‚æ—¶       | âœ…(å®æ—¶) | âœ…    | æ¯æ¬¡è¯·æ±‚        | â­â­â­â­â­   |
| Phase 6 | å®Œæ•´ RSC     | è¯·æ±‚æ—¶       | âœ…(å®æ—¶) | âœ…    | æ¯æ¬¡è¯·æ±‚        | â­â­â­â­â­â­ |

**æŠ€æœ¯ä¾èµ–å…³ç³»**ï¼š
- Phase 5 ä¾èµ– Phase 4ï¼ˆéœ€è¦å…ˆæœ‰è¯·æ±‚æ—¶æ¸²æŸ“ï¼‰
- Phase 6 ä¾èµ– Phase 5ï¼ˆSuspense éœ€è¦æµå¼ä¼ è¾“ï¼‰
- Phase 3 ç‹¬ç«‹äº Phase 4-6ï¼ˆISR æ˜¯é™æ€ç”Ÿæˆçš„å¢å¼ºï¼‰

---

## âœ… éªŒæ”¶ & å›æ»šæ ‡å‡†

* **åŠŸèƒ½å®Œæ•´**ï¼šè·¯ç”±è®¿é—®æ­£å¸¸ï¼Œæ•°æ®æ¸²æŸ“æ­£ç¡®ã€‚
* **æ€§èƒ½è¾¾æ ‡**ï¼šLCP/TTFB â‰¥ 90 åˆ†ä½ä¼˜äºåŸºçº¿ã€‚
* **ç¼“å­˜å‘½ä¸­**ï¼šé™æ€å‘½ä¸­ç‡ â‰¥ 95%ã€‚
* **å†ç”Ÿç¨³å®š**ï¼šé˜Ÿåˆ—é•¿åº¦ã€å¤±è´¥ç‡ã€å»¶è¿Ÿç›‘æ§ç¨³å®šã€‚
* **ä¸€é”®å›æ»š**ï¼šç‰ˆæœ¬åŒ– S3 å¯¹è±¡ + CDN Invalidationã€‚

---

## ğŸ›  å®æ–½ TODO æ¸…å•

### å…¨å±€åŸºçº¿ï¼ˆPhase 0 å…±ç”¨ï¼‰

* [ ] æ˜ç¡®æ¸²æŸ“è¾¹ç•Œï¼šé»˜è®¤ `server components`ï¼Œä»…äº¤äº’åŠ  `"use client"`
* [ ] è®¾è®¡ `fetchPageData(params)` çº¯å‡½æ•°ï¼ˆæ— è¯·æ±‚æ€ã€å¯é‡å…¥ã€å¯ç¼“å­˜ï¼‰
* [ ] ç»Ÿä¸€ `render(url, data)` æ¸²æŸ“æ¥å£ï¼ˆåç»­å¯åˆ‡ RSC å®ç°ï¼‰
* [ ] å»ºç«‹ `routes.config.ts`ï¼ˆ`mode: static|ssr`ã€`revalidate`ã€`cacheTags`ï¼‰
* [ ] äº§ç‰©è§„èŒƒä¸ç›®å½•ç¨³å®šåŒ–ï¼š`/pages/**/index.html`ã€`/assets/**`ã€`/manifests/*`ã€`manifest.json`
* [ ] ç¯å¢ƒé…ç½®åˆ†å±‚ï¼šæœ¬åœ°/CI/Pre/Prodï¼ˆSecretsã€API Baseã€DB/Token æƒé™æœ€å°åŒ–ï¼‰
* [ ] åŸºå‡†æµ‹è¯•ï¼šé¦–å±ã€TTFBã€åŒ…ä½“ç§¯ä¸å…³é”®è·¯ç”±åŸºçº¿è®°å½•

### Phase 1ï¼šçº¯ SSG

* [ ] è·¯ç”±æ‰«æä¸é™æ€åŒ–è„šæœ¬ï¼ˆæ”¯æŒåŠ¨æ€å‚æ•°æšä¸¾ `generateStaticParams`ï¼‰
* [ ] å®¢æˆ·ç«¯å²›å±¿æ‹†åˆ†ä¸æŒ‰éœ€åˆ†åŒ…ï¼ˆé¿å…å…¨å±€ hydrationï¼‰
* [ ] é™æ€èµ„æºæŒ‡çº¹åŒ–ï¼ˆhashï¼‰ä¸å…¬å…± CDN è·¯å¾„é…ç½®
* [ ] S3/R2 æ¡¶ä¸ Bucket Policyã€ç‰ˆæœ¬åŒ–å¼€å¯
* [ ] CDNï¼ˆCloudFront/Cloudflareï¼‰åŸºç¡€åˆ†å‘åŸŸåã€HTTPSã€HSTS
* [ ] Cache-Controlï¼šHTML é•¿ s-maxageï¼ˆå…ˆä¸ SWRï¼‰ã€Assets `immutable`
* [ ] 404/500/é‡å®šå‘ä¸è§„èŒƒè·¯ç”±ï¼ˆå«å¤šè¯­è¨€ï¼‰
* [ ] Lighthouse & Web Vitals åŸºçº¿è¯„ä¼°

### Phase 2ï¼šå¼•å…¥ RSCï¼ˆæ„å»ºæœŸæ‰§è¡Œï¼‰

* [ ] å°†â€œçº¯å±•ç¤ºâ€æ¨¡æ¿è¿ç§»ä¸º server ç»„ä»¶ï¼›äº¤äº’ä¿ç•™ client å²›å±¿
* [ ] æ„å»ºæœº/å†ç”Ÿæœºçš„ Node è¿è¡Œæ—¶ä¸ä¾èµ–ä½“ç§¯æ²»ç†ï¼ˆpnpmã€å±‚/é•œåƒï¼‰
* [ ] äº§å‡º `manifests/rsc.json` ä¸ `manifests/client.json` çš„ç¨³å®šå¯»å€
* [ ] ç¬¬ä¸‰æ–¹ä»…æµè§ˆå™¨åº“éš”ç¦»åˆ° client ç»„ä»¶ï¼ˆLint è§„åˆ™/CI æ£€æŸ¥ï¼‰
* [ ] åŒ…ä½“ç§¯é¢„ç®—ä¸é¢„è­¦ï¼ˆJS æ€»é‡ã€å„è·¯ç”±å¢é‡é˜ˆå€¼ï¼‰
* [ ] å…³é”®é‡å‹æ­¥éª¤ï¼ˆMDX/ä»£ç é«˜äº®/å›¾åƒå ä½ï¼‰ç§»åˆ° server ä¾§

### Phase 3ï¼šåŠ å…¥ ISRï¼ˆSWR/Webhook äºŒé€‰ä¸€æˆ–æ··åˆï¼‰

* [ ] SWR å¤´ï¼š`s-maxage=300, stale-while-revalidate=86400`ï¼ˆä»… HTMLï¼‰
* [ ] Webhook æµï¼šCMS/DB â†’ äº‹ä»¶é˜Ÿåˆ—ï¼ˆSQS/Kafka/Queueï¼‰â†’ å†ç”Ÿ Worker
* [ ] å†ç”Ÿ Workerï¼š`fetchPageData + renderRSC` â†’ ä¸´æ—¶ Key â†’ æ ¡éªŒ â†’ åŸå­åˆ‡æ¢
* [ ] è·¯ç”±çº§å¹¶å‘é”ä¸å»æŠ–ï¼ˆDynamoDB/Redis/KV/DOï¼‰
* [ ] ç²¾ç¡®è½¯æ¸…ç­–ç•¥ï¼šCloudFront Invalidation/Cache-Tag/Surrogate-Key
* [ ] å†ç”ŸæŒ‡æ ‡ï¼šæ’é˜Ÿæ—¶é•¿ã€æ¸²æŸ“è€—æ—¶ã€å¤±è´¥ç‡ã€å›æ»šæŒ‰é’®

### Phase 4ï¼šå°‘æ•°è·¯ç”±è¡¥ SSRï¼ˆå« PPR/Actionsï¼‰

* [ ] `routes.config.ts` ä¸º `/dashboard/**`ã€`/checkout/**`ã€`/api/**` æ ‡è®° `mode: 'ssr'`
* [ ] æ„å»º SSR è¿è¡Œæ—¶ï¼ˆNode/Lambda/Workersï¼‰ï¼Œå¼€å¯ React 19 PPR
* [ ] CDN Behaviorsï¼š`/*`â†’S3 é™æ€æºï¼›`/api/*`ã€`/dashboard/*`ã€`/checkout/*`â†’SSR æº
* [ ] SSR ç¼“å­˜ç­–ç•¥ï¼šHTML `no-store` æˆ–çŸ­ s-maxageï¼›ç‰‡æ®µ/æ•°æ®å±‚ç¼“å­˜ï¼ˆKV/å†…å­˜ï¼‰
* [ ] Server Actions ä¸é‰´æƒï¼ˆCSRFã€åŒç«™ Cookieã€ç­¾åæ ¡éªŒã€CORSï¼‰
* [ ] å†·å¯åŠ¨æ²»ç†ï¼šæœ€å°åŒ…ã€è¿æ¥å¤ç”¨ã€é¢„çƒ­ã€åŒºåŸŸ/Edge é€‰æ‹©

### åŸºç¡€è®¾æ–½ä¸ CI/CD

* [ ] IaCï¼šCDK/Terraform å®šä¹‰ S3ã€CloudFrontã€Lambda/Workersã€DNS
* [ ] åŒäº§ç‰©æµæ°´çº¿ï¼š`build:static`ï¼ˆRSC ç¦»çº¿ï¼‰ä¸ `build:ssr`ï¼ˆè¿è¡Œæ—¶ï¼‰
* [ ] ç°åº¦å‘å¸ƒï¼šé™æ€é¢ç‰ˆæœ¬æŒ‡é’ˆåˆ‡æ¢ï¼›SSR è“ç»¿/æƒé‡åˆ‡æ¢
* [ ] æœºå¯†ç®¡ç†ï¼šAWS Secrets Manager/Cloudflare Secretsï¼Œæœ€å°æƒé™ IAM/Bindings
* [ ] æˆæœ¬çœ‹æ¿ï¼šCDN å‘½ä¸­ç‡ã€å›æºæ¯”ã€å‡½æ•°è°ƒç”¨è®¡è´¹ã€å­˜å‚¨/æµé‡

### è§‚æµ‹ä¸å‘Šè­¦

* [ ] å‰ç«¯ RUMï¼šTTFB/LCP/INP/CLSï¼ˆåˆ†è·¯ç”±ä¸ŠæŠ¥ï¼‰
* [ ] å†ç”Ÿé“¾è·¯ï¼šé˜Ÿåˆ—é•¿åº¦ã€å¹³å‡/95 åˆ†ä½è€—æ—¶ã€å¤±è´¥ç‡é˜ˆå€¼å‘Šè­¦
* [ ] SSR é“¾è·¯ï¼šTTFBã€å„æ®µå°±ç»ªæ—¶é—´ï¼ˆPPR æ®µï¼‰ã€é”™è¯¯ç‡/å†·å¯åŠ¨å æ¯”
* [ ] CDNï¼šå‘½ä¸­ç‡ã€å›æºç‡ã€4xx/5xxã€è¾¹ç¼˜åœ°åŒºåˆ†å¸ƒ
* [ ] æ—¥å¿—å…³è”ï¼štrace-id è´¯ç©¿æ„å»º/å†ç”Ÿ/SSR/è¾¹ç¼˜

### å®‰å…¨ä¸åˆè§„

* [ ] å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ï¼š`script-src 'self' 'strict-dynamic'`ã€å­èµ„æºå®Œæ•´æ€§ï¼ˆSRIï¼‰
* [ ] ä¾èµ–å®‰å…¨ï¼šCVE æ‰«æã€é”å®šç‰ˆæœ¬ã€æ„å»ºé•œåƒåŠ å›º
* [ ] æ•°æ®æºè®¿é—®ï¼šåªåœ¨æ„å»º/å†ç”Ÿ/SSR æœºè¯»ç§åŸŸæ•°æ®ï¼›å®¢æˆ·ç«¯ä¸æ³„éœ²å¯†é’¥
* [ ] è¡¨å•ä¸ Actionsï¼šCSRF/Rate Limit/WAF è§„åˆ™
* [ ] éšç§ä¸æ—¥å¿—ï¼šPII è„±æ•ã€è®¿é—®æ—¥å¿—ç•™å­˜ä¸æ¸…ç†å‘¨æœŸ

### æ€§èƒ½ä¸å‰ç«¯è´¨é‡

* [ ] èµ„æºé¢„å–ï¼š`preload/prefetch` ä¸ HTTP/2 Pushï¼ˆæˆ– 103 Early Hintsï¼‰
* [ ] å›¾ç‰‡ç­–ç•¥ï¼šå“åº”å¼ `srcset`ã€å ä½ LQIP/BlurHashã€å»¶è¿ŸåŠ è½½é˜ˆå€¼
* [ ] å­—ä½“ç­–ç•¥ï¼šå¯å˜å­—ä½“ã€`font-display: swap`ã€å­é›†åŒ–
* [ ] ä»£ç åˆ†å‰²ï¼šè·¯ç”±çº§ä¸ç»„ä»¶çº§ï¼›é¿å…å¤§ä½“ç§¯ client ä¾èµ–
* [ ] é”™è¯¯è¾¹ç•Œä¸ç¦»çº¿å…œåº•ï¼ˆSW å¯é€‰ï¼‰

### SEO / å¯è®¿é—®æ€§ / å›½é™…åŒ–

* [ ] è¯­ä¹‰åŒ– HTMLã€head å…ƒä¿¡æ¯ã€ç»“æ„åŒ–æ•°æ®ï¼ˆJSON-LDï¼‰
* [ ] Sitemapã€Robotsã€Canonicalã€å¤šè¯­è¨€ `hreflang`
* [ ] A11y åŸºçº¿ï¼šå¯¹æ¯”åº¦ã€é”®ç›˜å¯è¾¾ã€ARIAã€ç„¦ç‚¹ç®¡ç†
* [ ] i18nï¼šæ–‡æ¡ˆæŠ½å–ã€è¯­è¨€åˆ‡æ¢ã€åŒºåŸŸåŒ–è·¯ç”±

### è¿ç»´ä¸å›æ»š

* [ ] é™æ€é¢ï¼š`manifest.json` æŒ‡é’ˆå›æ»šï¼›S3 ç‰ˆæœ¬åŒ–ä¸€é”®è¿˜åŸ
* [ ] SSR é¢ï¼šè“ç»¿/é‡‘ä¸é›€å‘å¸ƒï¼Œæ•…éšœè‡ªåŠ¨å›åˆ‡
* [ ] ç¾å¤‡ï¼šå¤šåŒºåŸŸå¯¹è±¡å¤åˆ¶ã€è·¨åŒºåŸŸ CDN å¤±æ•ˆé¢„æ¡ˆ
* [ ] Runbookï¼šå†ç”Ÿå¤±è´¥ã€CDN å‘½ä¸­éª¤é™ã€SSR 502ã€ç¼“å­˜æ±¡æŸ“çš„å¤„ç½®æµç¨‹

---

## ğŸ“ˆ æœªæ¥æ‰©å±•ï¼šå®Œæ•´ç‰ˆ RSC æ¼”è¿›è·¯å¾„

### Phase 2.5ï¼šå¢å¼ºé™æ€ RSCï¼ˆå¯é€‰ï¼‰âœ… å·²å®Œæˆ

**å®Œæˆæ—¥æœŸ**ï¼š2025-11-11
**å®é™…ç”¨æ—¶**ï¼šçº¦ 2-3 å°æ—¶

**ç›®æ ‡**ï¼šåœ¨ç®€åŒ–ç‰ˆåŸºç¡€ä¸Šå¢å¼ºåŠŸèƒ½ï¼Œä½†ä»ä¿æŒé™æ€æ„å»º

**å·²å®ŒæˆåŠŸèƒ½**ï¼š
- [x] æ”¯æŒæ„å»ºæ—¶çš„ async Server Components
  - Server Component å¯ä»¥ `await fetch()`, `await fs.readFile()` ç­‰
  - æ„å»ºæ—¶ç­‰å¾…æ‰€æœ‰å¼‚æ­¥å®Œæˆ
  - åˆ›å»ºäº† `rsc-to-html.ts` è§£å†³ renderToString é™åˆ¶
- [x] ä¼˜åŒ– RSC Payload æ ¼å¼
  - æ·»åŠ  Fragment èŠ‚ç‚¹ç±»å‹æ”¯æŒ
  - æ”¯æŒ React.Fragment å’Œ `<>...</>` è¯­æ³•
- [x] æ”¯æŒåµŒå¥— Client Components
  - Client Component å¯ä»¥åŒ…å«å…¶ä»– Client Components
  - è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»å’Œ children ä¼ é€’
  - æ­£ç¡®åºåˆ—åŒ–å’Œååºåˆ—åŒ–åµŒå¥—ç»“æ„
- [ ] ä»£ç åˆ†å‰²ä¼˜åŒ–ï¼ˆæš‚æ—¶è·³è¿‡ï¼‰
  - æ¯ä¸ª Client Component ç‹¬ç«‹æ‰“åŒ…
  - æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹ bundle size
  - æ³¨ï¼šå¯åœ¨æœªæ¥å®ç°æˆ–ä½¿ç”¨ Next.js

**å¤æ‚åº¦**ï¼šâ­â­â­
**å­¦ä¹ ä»·å€¼**ï¼šâœ… ç†è§£äº†æ›´å¤æ‚çš„åºåˆ—åŒ–åœºæ™¯å’Œå¼‚æ­¥å¤„ç†

**è¯¦ç»†æ–‡æ¡£**ï¼šè§ `docs/Phase-2.5-Summary.md`

---

## ğŸ“ˆ Phase 3-6 è¯¦ç»†è§„åˆ’

### âš ï¸ é‡è¦è¯´æ˜ï¼šæŠ€æœ¯ä¾èµ–å…³ç³»

```
Phase 3 (ISR)
  â”œâ”€ é™æ€ç”Ÿæˆ + ç¼“å­˜
  â””â”€ åå°æ›´æ–°

Phase 4 (åŸºç¡€ SSR) â¬…ï¸ Phase 5 çš„å‰ç½®æ¡ä»¶
  â”œâ”€ è¯·æ±‚æ—¶æ¸²æŸ“
  â””â”€ ä¸€æ¬¡æ€§è¿”å›å®Œæ•´ HTML

Phase 5 (Streaming SSR) â¬…ï¸ Phase 6 çš„å‰ç½®æ¡ä»¶
  â”œâ”€ æµå¼ä¼ è¾“
  â””â”€ renderToReadableStream

Phase 6 (å®Œæ•´ RSC)
  â”œâ”€ Suspense
  â”œâ”€ Server Actions
  â””â”€ å®Œæ•´æµåè®®
```

**å¿…é¡»æŒ‰é¡ºåºå®æ–½ï¼** å› ä¸ºï¼š
- Streaming éœ€è¦è¯·æ±‚æ—¶æ¸²æŸ“ï¼ˆPhase 4ï¼‰
- Suspense éœ€è¦æµå¼ä¼ è¾“ï¼ˆPhase 5ï¼‰
- Server Actions éœ€è¦ SSR è¿è¡Œæ—¶ï¼ˆPhase 4+ï¼‰

---

### Phase 3: ISR è¯¦ç»†è§„åˆ’ âœ… å·²è§„åˆ’

**æ–‡æ¡£**ï¼š`docs/Phase-3-ISR-Plan.md`

**æ ¸å¿ƒå†…å®¹**ï¼š
- Koa æœåŠ¡å™¨ + ç¼“å­˜ç®¡ç†
- SWR ç¼“å­˜ç­–ç•¥
- åå°å†ç”Ÿé˜Ÿåˆ—
- Webhook API

**é¢„è®¡æ—¶é—´**ï¼š3-5 å¤©

**å…³é”®ç†è§£**ï¼š
- âŒ **ä¸æ˜¯** SSRï¼ˆä¸æ˜¯è¯·æ±‚æ—¶æ¸²æŸ“ï¼‰
- âœ… **æ˜¯** æ™ºèƒ½ç¼“å­˜ + åå°æ„å»º
- âœ… é¡µé¢ä»æ˜¯é¢„å…ˆç”Ÿæˆçš„é™æ€ HTML

---

### Phase 4: åŸºç¡€ SSR è§„åˆ’ ğŸ”œ ä¸‹ä¸€æ­¥

**ç›®æ ‡**ï¼šè¯·æ±‚æ—¶å®æ—¶æ¸²æŸ“é¡µé¢

**âš ï¸ é‡è¦**ï¼šPhase 4 æ˜¯ Phase 5-7 çš„å‰ç½®æ¡ä»¶ï¼
- Phase 5 (Streaming) éœ€è¦ Phase 4 çš„è¯·æ±‚æ—¶æ¸²æŸ“èƒ½åŠ›
- Phase 6 (å®Œæ•´ RSC) éœ€è¦ Phase 4 çš„è¿è¡Œæ—¶
- Phase 7 (PPR) éœ€è¦ Phase 4 çš„ SSR èƒ½åŠ›æ¥æ¸²æŸ“åŠ¨æ€éƒ¨åˆ†

**æ ¸å¿ƒå˜åŒ–**ï¼š
```typescript
// ISR (Phase 3): ä»ç¼“å­˜è¿”å›
const cached = await cache.get(path);
res.send(cached);

// SSR (Phase 4): è¯·æ±‚æ—¶æ¸²æŸ“
const PageComponent = await import('./pages/...');
const html = await renderPage(PageComponent);
res.send(html);  // â¬…ï¸ ä»æ˜¯ä¸€æ¬¡æ€§å‘é€
```

**æ–°å¢åŠŸèƒ½**ï¼š
- [ ] è¯·æ±‚æ—¶è°ƒç”¨æ¸²æŸ“ç®¡é“
- [ ] åŠ¨æ€è·¯ç”±å‚æ•° (`/blog/[slug]`)
- [ ] è¯·æ±‚ä¸Šä¸‹æ–‡ä¼ é€’ï¼ˆcookies, headersï¼‰
- [ ] è·¯ç”±æ¨¡å¼é…ç½® (`mode: 'ssr'`)

**é¢„è®¡æ—¶é—´**ï¼š2-3 å¤©

**å‰ç½®æ¡ä»¶**ï¼šPhase 3 å®Œæˆ

---

### Phase 5: Streaming SSR è§„åˆ’

**ç›®æ ‡**ï¼šæµå¼ä¼ è¾“ HTMLï¼Œæ”¹å–„ TTFB

**æ ¸å¿ƒå˜åŒ–**ï¼š
```typescript
// Phase 4: ç­‰å¾…å®Œæ•´æ¸²æŸ“
const html = await renderPage(Component);
res.send(html);  // ä¸€æ¬¡æ€§å‘é€

// Phase 5: æµå¼æ¸²æŸ“
const stream = renderToReadableStream(<Component />);
res.body = stream;  // è¾¹æ¸²æŸ“è¾¹å‘é€
```

**éœ€è¦å®ç°**ï¼š
- [ ] `renderToReadableStream` é›†æˆ
- [ ] HTML æµå¼ä¼ è¾“
- [ ] Chunk è¾¹ç•Œå¤„ç†
- [ ] é”™è¯¯æ¢å¤

**é¢„è®¡æ—¶é—´**ï¼š3-4 å¤©

**å‰ç½®æ¡ä»¶**ï¼šPhase 4 (åŸºç¡€ SSR) å¿…é¡»å…ˆå®Œæˆ

---

### Phase 6: å®Œæ•´ RSC (Suspense + Server Actions)

**ç›®æ ‡**ï¼šç”Ÿäº§çº§ RSC å®ç°

**ç‰¹æ€§ 1: Suspense æ”¯æŒ**

```typescript
<Suspense fallback={<Loading />}>
  <AsyncComponent />  // å…ˆå‘é€ fallbackï¼Œå°±ç»ªåæ›¿æ¢
</Suspense>
```

**éœ€è¦å®ç°**ï¼š
- [ ] Suspense è¾¹ç•Œæ£€æµ‹
- [ ] Fallback å…ˆå‘é€
- [ ] ç»„ä»¶å°±ç»ªåæ›¿æ¢
- [ ] æµå¼æ›¿æ¢è„šæœ¬

**ç‰¹æ€§ 2: Server Actions**

```typescript
'use server';
async function submitForm(formData) {
  await db.insert(formData);
}
```

**éœ€è¦å®ç°**ï¼š
- [ ] Server Action è¯†åˆ«
- [ ] RPC ç«¯ç‚¹ç”Ÿæˆ
- [ ] CSRF ä¿æŠ¤
- [ ] ä¹è§‚æ›´æ–°æ”¯æŒ

**é¢„è®¡æ—¶é—´**ï¼š5-7 å¤©

**å‰ç½®æ¡ä»¶**ï¼šPhase 5 (Streaming) å¿…é¡»å…ˆå®Œæˆ

---

### Phase 7: PPR (Partial Prerendering)

**ç›®æ ‡**ï¼šåœ¨åŒä¸€é¡µé¢ä¸­æ··åˆé™æ€å’ŒåŠ¨æ€å†…å®¹

**æ ¸å¿ƒæ¦‚å¿µ**ï¼šPPR æ˜¯ Next.js 14+ çš„åˆ›æ–°ç‰¹æ€§ï¼Œç»“åˆ SSG å’Œ SSR çš„ä¼˜åŠ¿

```typescript
// PPR ç¤ºä¾‹ï¼šåŒä¸€é¡µé¢ä¸­æ··åˆé™æ€å’ŒåŠ¨æ€éƒ¨åˆ†
export default function ProductPage({ productId }) {
  return (
    <div>
      {/* é™æ€éƒ¨åˆ† - æ„å»ºæ—¶é¢„æ¸²æŸ“ */}
      <Header />
      <ProductInfo productId={productId} />

      {/* åŠ¨æ€éƒ¨åˆ† - è¯·æ±‚æ—¶ Streaming å¡«å…… */}
      <Suspense fallback={<ReviewsSkeleton />}>
        <UserReviews userId={currentUser.id} />  {/* ä¸ªæ€§åŒ– */}
      </Suspense>

      <Suspense fallback={<RecommendationsSkeleton />}>
        <Recommendations userId={currentUser.id} />  {/* å®æ—¶æ¨è */}
      </Suspense>
    </div>
  );
}
```

**ç‰¹æ€§ 1: é™æ€/åŠ¨æ€è¾¹ç•Œè¯†åˆ«**

**éœ€è¦å®ç°**ï¼š
- [ ] æ‰«æç»„ä»¶æ ‘ï¼Œè¯†åˆ« Suspense è¾¹ç•Œ
- [ ] åŒºåˆ†é™æ€éƒ¨åˆ†ï¼ˆSuspense å¤–ï¼‰å’ŒåŠ¨æ€éƒ¨åˆ†ï¼ˆSuspense å†…ï¼‰
- [ ] æ„å»ºæ—¶ç”Ÿæˆé™æ€ HTML shell
- [ ] æ ‡è®°åŠ¨æ€å†…å®¹å ä½ç¬¦

**ç‰¹æ€§ 2: é™æ€ Shell é¢„æ¸²æŸ“**

```typescript
// æ„å»ºæ—¶ï¼šç”Ÿæˆé™æ€ HTML shell
async function prebuildStaticShell(Page) {
  // 1. åˆ†æç»„ä»¶æ ‘ï¼Œæ‰¾åˆ°æ‰€æœ‰ Suspense è¾¹ç•Œ
  const suspenseBoundaries = analyzeSuspenseBoundaries(Page);

  // 2. æ¸²æŸ“é™æ€éƒ¨åˆ†ï¼ˆSuspense å¤–çš„å†…å®¹ï¼‰
  const staticShell = renderStaticParts(Page, suspenseBoundaries);

  // 3. ä¸ºåŠ¨æ€éƒ¨åˆ†æ’å…¥å ä½ç¬¦
  return injectDynamicPlaceholders(staticShell, suspenseBoundaries);
}
```

**ç‰¹æ€§ 3: åŠ¨æ€å†…å®¹ Streaming**

```typescript
// è¯·æ±‚æ—¶ï¼šæµå¼å¡«å……åŠ¨æ€å†…å®¹
app.get('/product/:id', async (req, res) => {
  // 1. ç«‹å³å‘é€é™æ€ shell
  const staticShell = await getPrerenderedShell(req.url);
  res.write(staticShell);

  // 2. å¼€å§‹ Streaming åŠ¨æ€éƒ¨åˆ†
  const dynamicStream = renderToReadableStream(
    <DynamicParts userId={req.userId} />
  );

  // 3. åŠ¨æ€å†…å®¹å°±ç»ªåï¼Œé€šè¿‡ <script> æ³¨å…¥æ›¿æ¢
  for await (const chunk of dynamicStream) {
    res.write(`<script>self.__ppr_replace('slot-1', ${chunk})</script>`);
  }

  res.end();
});
```

**ç‰¹æ€§ 4: è·¯ç”±é…ç½®æ‰©å±•**

```typescript
// routes.config.ts
export const routes = [
  {
    path: '/product/:id',
    mode: 'ppr',  // æ–°å¢ PPR æ¨¡å¼
    staticPaths: generateStaticProductIds(),  // æ„å»ºæ—¶ç”Ÿæˆå“ªäº›è·¯å¾„
    prerender: {
      // é™æ€éƒ¨åˆ†
      static: ['header', 'layout', 'productInfo', 'footer'],
      // åŠ¨æ€éƒ¨åˆ†ï¼ˆSuspense åŒ…è£¹ï¼‰
      dynamic: [
        { id: 'reviews', fallback: 'ReviewsSkeleton' },
        { id: 'recommendations', fallback: 'RecommendationsSkeleton' },
      ],
    },
    revalidate: 3600,  // é™æ€éƒ¨åˆ† 1 å°æ—¶æ›´æ–°
  },
];
```

**éœ€è¦å®ç°**ï¼š
- [ ] Suspense è¾¹ç•Œæ‰«æå™¨
- [ ] é™æ€ shell ç”Ÿæˆå™¨
- [ ] åŠ¨æ€å ä½ç¬¦ç³»ç»Ÿ
- [ ] å®¢æˆ·ç«¯æ›¿æ¢è„šæœ¬
- [ ] PPR ç¼“å­˜ç­–ç•¥ï¼ˆé™æ€ shell ç¼“å­˜ + åŠ¨æ€å†…å®¹å®æ—¶ï¼‰
- [ ] è·¯ç”±é…ç½®æ‰©å±•ï¼ˆ`mode: 'ppr'`ï¼‰

**æŠ€æœ¯æ¶æ„**ï¼š

```
æ„å»ºæ—¶ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ åˆ†æç»„ä»¶æ ‘                      â”‚
  â”‚ â””â”€ æ‰¾åˆ°æ‰€æœ‰ Suspense è¾¹ç•Œ       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ç”Ÿæˆé™æ€ Shell                  â”‚
  â”‚ â””â”€ æ¸²æŸ“ Suspense å¤–çš„å†…å®¹       â”‚
  â”‚ â””â”€ æ’å…¥åŠ¨æ€å ä½ç¬¦               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ä¿å­˜åˆ°ç¼“å­˜                      â”‚
  â”‚ â””â”€ cache/ppr/[route].html       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¯·æ±‚æ—¶ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1. è¿”å›é™æ€ Shellï¼ˆ0msï¼‰        â”‚
  â”‚    â””â”€ ç”¨æˆ·ç«‹å³çœ‹åˆ°é¡µé¢æ¡†æ¶      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 2. Streaming åŠ¨æ€å†…å®¹           â”‚
  â”‚    â””â”€ å¹¶è¡Œæ¸²æŸ“å¤šä¸ª Suspense     â”‚
  â”‚    â””â”€ å°±ç»ªåé€šè¿‡ <script> æ³¨å…¥  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 3. å®¢æˆ·ç«¯æ›¿æ¢å ä½ç¬¦             â”‚
  â”‚    â””â”€ self.__ppr_replace()      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åº”ç”¨åœºæ™¯**ï¼š

1. **ç”µå•†äº§å“é¡µ**ï¼š
   - é™æ€ï¼šäº§å“è¯¦æƒ…ã€è§„æ ¼ã€æè¿°
   - åŠ¨æ€ï¼šç”¨æˆ·è¯„è®ºã€ä¸ªæ€§åŒ–æ¨èã€åº“å­˜çŠ¶æ€

2. **åšå®¢æ–‡ç« é¡µ**ï¼š
   - é™æ€ï¼šæ–‡ç« å†…å®¹ã€ä½œè€…ä¿¡æ¯
   - åŠ¨æ€ï¼šè¯„è®ºåŒºã€ç›¸å…³æ¨èã€é˜…è¯»è¿›åº¦

3. **ä»ªè¡¨ç›˜é¡µé¢**ï¼š
   - é™æ€ï¼šé¡µé¢å¸ƒå±€ã€å¯¼èˆª
   - åŠ¨æ€ï¼šç”¨æˆ·æ•°æ®ã€å®æ—¶æŒ‡æ ‡

**æ€§èƒ½ä¼˜åŠ¿**ï¼š

| æŒ‡æ ‡ | çº¯ SSG | çº¯ SSR | PPR |
|------|--------|--------|-----|
| **åˆå§‹ TTFB** | âš¡ æå¿« | ğŸ¢ æ…¢ | âš¡ æå¿« |
| **åŠ¨æ€å†…å®¹** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **ä¸ªæ€§åŒ–** | âŒ æ—  | âœ… å®Œå…¨ | âœ… éƒ¨åˆ† |
| **SEO** | âœ… å®Œç¾ | âœ… è‰¯å¥½ | âœ… å®Œç¾ |
| **æœåŠ¡å™¨è´Ÿè½½** | âš¡ æä½ | ğŸ”¥ é«˜ | ğŸ“Š ä¸­ç­‰ |

**é¢„è®¡æ—¶é—´**ï¼š2-3 å¤©

**å‰ç½®æ¡ä»¶**ï¼š
- âœ… Phase 4 (åŸºç¡€ SSR) - è¯·æ±‚æ—¶æ¸²æŸ“èƒ½åŠ›
- âœ… Phase 5 (Streaming SSR) - æµå¼ä¼ è¾“èƒ½åŠ›
- âœ… Phase 6 (Suspense) - Suspense è¾¹ç•Œæ”¯æŒ

**å¤æ‚åº¦**ï¼šâ­â­â­â­â­

**å­¦ä¹ ä»·å€¼**ï¼š
- âœ… ç†è§£é™æ€å’ŒåŠ¨æ€å†…å®¹çš„æœ€ä½³ç»“åˆæ–¹å¼
- âœ… æŒæ¡æ¸è¿›å¼é¡µé¢åŠ è½½ç­–ç•¥
- âœ… å­¦ä¹ ç”Ÿäº§çº§æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯
- âœ… ç†è§£ Next.js 14+ PPR çš„åº•å±‚å®ç°

---

## ğŸ¯ å®Œæ•´å­¦ä¹ è·¯å¾„æ€»ç»“

### å·²å®Œæˆ âœ…
- Phase 0: æœ€å° SSG
- Phase 1: Client å²›å±¿ + Hydration
- Phase 2: ç®€åŒ–ç‰ˆ RSC
- Phase 2.5: å¢å¼ºç‰ˆ RSC (Async + Fragment + åµŒå¥—)

### å³å°†å¼€å§‹ ğŸš€
- **Phase 3: ISR** (3-5 å¤©)
  - Koa æœåŠ¡å™¨
  - ç¼“å­˜ç®¡ç†
  - SWR ç­–ç•¥
  - åå°å†ç”Ÿ

### æœªæ¥è§„åˆ’ ğŸ“…

#### Phase 4: åŸºç¡€ SSR (2-3 å¤©)
- è¯·æ±‚æ—¶æ¸²æŸ“
- åŠ¨æ€å†…å®¹
- è·¯ç”±å‚æ•°

#### Phase 5: Streaming SSR (3-4 å¤©)
- æµå¼ä¼ è¾“
- æ”¹å–„ TTFB
- Chunk å¤„ç†

#### Phase 6: å®Œæ•´ RSC (5-7 å¤©)
- Suspense
- Server Actions
- ç”Ÿäº§çº§å®ç°

#### Phase 7: PPR (2-3 å¤©)
- é™æ€/åŠ¨æ€è¾¹ç•Œè¯†åˆ«
- é™æ€ Shell é¢„æ¸²æŸ“
- åŠ¨æ€å†…å®¹ Streaming
- æ¸è¿›å¼é¡µé¢åŠ è½½

**æ€»è®¡æ—¶é—´**ï¼š15-22 å¤©ï¼ˆPhase 3-7ï¼‰

---

### å„é˜¶æ®µåŠŸèƒ½å¯¹æ¯”è¡¨

| ç‰¹æ€§ | Phase 2 | Phase 2.5 | Phase 3 | Phase 4 | Phase 5 | Phase 6 | Phase 7 |
|------|---------|-----------|---------|---------|---------|---------|---------|
| **ç»„ä»¶æ ‘åºåˆ—åŒ–** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Server/Client è¾¹ç•Œ** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Async Server Components** | âŒ | âœ… æ„å»ºæ—¶ | âœ… æ„å»ºæ—¶ | âœ… è¿è¡Œæ—¶ | âœ… | âœ… | âœ… |
| **Fragment æ”¯æŒ** | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **åµŒå¥— Client Components** | âŒ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **ISR (ç¼“å­˜æ›´æ–°)** | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ | âœ… é™æ€éƒ¨åˆ† |
| **SSR (è¯·æ±‚æ—¶æ¸²æŸ“)** | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… åŠ¨æ€éƒ¨åˆ† |
| **Streaming** | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… |
| **Suspense** | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| **Server Actions** | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| **PPR (æ··åˆæ¸²æŸ“)** | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| **æ¸²æŸ“æ¨¡å¼** | é™æ€ | é™æ€ | ç¼“å­˜ | SSR | æµå¼SSR | å®Œæ•´RSC | æ··åˆ |
| **è¿è¡Œæ—¶** | é™æ€ | é™æ€ | Koaç¼“å­˜ | Koa SSR | Koaæµå¼ | Koaå®Œæ•´ | Koa PPR |
| **åˆå§‹TTFB** | âš¡ æå¿« | âš¡ æå¿« | âš¡ æå¿« | ğŸ¢ æ…¢ | ğŸ“Š ä¸­ç­‰ | ğŸ“Š ä¸­ç­‰ | âš¡ æå¿« |
| **åŠ¨æ€å†…å®¹** | âŒ | âŒ | âŒ | âœ… | âœ… | âœ… | âœ… |
| **å¤æ‚åº¦** | â­â­ | â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­â­ | â­â­â­â­â­ |
| **é¢„è®¡æ—¶é—´** | 3-5å¤© | 2-3å°æ—¶ | 3-5å¤© | 2-3å¤© | 3-4å¤© | 5-7å¤© | 2-3å¤© |

---

### å®Œæ•´ç‰ˆå®ç°å»ºè®®

**å¦‚æœè¦å®ç°å®Œæ•´ç‰ˆ RSCï¼š**

#### æ–¹æ¡ˆ Aï¼šç»§ç»­æ‰‹å†™ï¼ˆæ·±å…¥å­¦ä¹ ï¼‰
- **ä¼˜åŠ¿**ï¼šå®Œå…¨ç†è§£åº•å±‚å®ç°
- **åŠ£åŠ¿**ï¼šå·¥ä½œé‡æå¤§ï¼ˆ2-4 å‘¨ï¼‰
- **é€‚åˆ**ï¼šç ”ç©¶/æ•™å­¦ç›®çš„

#### æ–¹æ¡ˆ Bï¼šç ”ç©¶ Next.js æºç ï¼ˆæ¨èï¼‰
- **ä¼˜åŠ¿**ï¼šå­¦ä¹ ç”Ÿäº§çº§å®è·µ
- **åŠ£åŠ¿**ï¼šä»£ç åº“åºå¤§ï¼Œéœ€è¦æ—¶é—´ç†è§£
- **é€‚åˆ**ï¼šå·¥ç¨‹å®è·µ

#### æ–¹æ¡ˆ Cï¼šä½¿ç”¨ç°æˆæ¡†æ¶ï¼ˆç”Ÿäº§ï¼‰
- **Next.js**ï¼šæœ€æˆç†Ÿçš„ RSC å®ç°
- **Remix**ï¼šä¸åŒçš„æ¶æ„æ€è·¯
- **é€‚åˆ**ï¼šå®é™…é¡¹ç›®

---

### æ‰©å±•èµ„æº

#### å­¦ä¹ èµ„æ–™
- [React Server Components RFC](https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md)
- [RSC From Scratch (Dan Abramov)](https://github.com/reactwg/server-components)
- [Next.js App Router æºç ](https://github.com/vercel/next.js/tree/canary/packages/next/src/server)
- [Next.js 14 PPR æ–‡æ¡£](https://nextjs.org/docs/app/building-your-application/rendering/partial-prerendering)
- [React 19 æ–‡æ¡£](https://react.dev/)

#### å…¶ä»–æ‰©å±•
- **å¤šåŒºåŸŸåˆ†å¸ƒå¼å†ç”Ÿ**ï¼ˆEdge ISRï¼‰
- **ç›‘æ§é¢æ¿**ï¼ˆTTFB / å†ç”Ÿé˜Ÿåˆ— / å‘½ä¸­ç‡ï¼‰
- **è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–**ï¼ˆCloudflare Workers / Vercel Edgeï¼‰

---

### ğŸ§© æ€»ç»“

> **âœ… å·²å®Œæˆè·¯å¾„**ï¼š
> - MVP-Phase 0: æœ€å° SSG âœ…
> - MVP-Phase 1: Client å²›å±¿ + Hydration âœ…
> - MVP-Phase 2: ç®€åŒ–ç‰ˆ RSC âœ…
> - MVP-Phase 2.5: å¢å¼ºç‰ˆ RSC (Async + Fragment + åµŒå¥—) âœ…
>
> **ğŸ¯ å½“å‰çŠ¶æ€**ï¼šPhase 2.5 âœ… å·²å®Œæˆï¼ˆ2025-11-11ï¼‰
>
> **ğŸš€ ä¸‹ä¸€æ­¥**ï¼šPhase 3 - ISR (Incremental Static Regeneration)
> - é¢„è®¡æ—¶é—´ï¼š3-5 å¤©
> - æ ¸å¿ƒå†…å®¹ï¼šKoa æœåŠ¡å™¨ + ç¼“å­˜ç®¡ç† + SWR + åå°å†ç”Ÿ
> - è§„åˆ’æ–‡æ¡£ï¼š`docs/Phase-3-ISR-Plan.md`
>
> **ğŸ“š å­¦ä¹ ä»·å€¼**ï¼š
> - âœ… å·²æŒæ¡ 80%+ çš„ RSC æ ¸å¿ƒåŸç†
> - âœ… æ‰‹å†™å®ç°äº†åŠŸèƒ½å®Œå–„çš„ RSC ç³»ç»Ÿ
> - âœ… æ”¯æŒå¼‚æ­¥ Server Components
> - âœ… æ”¯æŒ Fragment å’ŒåµŒå¥— Client Components
> - âœ… æ·±å…¥ç†è§£äº† RSC å·¥ä½œåŸç†
>
> **ğŸ”® å®Œæ•´æ¼”è¿›è·¯å¾„**ï¼š
> ```
> Phase 0-2.5 (å·²å®Œæˆ) â†’ Phase 3 (ISR) â†’ Phase 4 (SSR)
>   â†’ Phase 5 (Streaming) â†’ Phase 6 (å®Œæ•´ RSC) â†’ Phase 7 (PPR)
> ```
>
> **âš ï¸ é‡è¦æé†’**ï¼š
> - Phase 3 (ISR) æ˜¯é™æ€ç”Ÿæˆçš„å¢å¼ºï¼Œä¸æ˜¯ SSR
> - Phase 5-7 ä¾èµ– Phase 4ï¼Œå¿…é¡»æŒ‰é¡ºåºå®æ–½
> - Streaming å’Œ Suspense éœ€è¦ SSR ä½œä¸ºåŸºç¡€
> - PPR éœ€è¦ Phase 4-6 çš„æ‰€æœ‰èƒ½åŠ›ï¼ˆSSR + Streaming + Suspenseï¼‰
>
> **ğŸ“ æœ€ç»ˆç›®æ ‡**ï¼šç†è§£ä» SSG åˆ°å®Œæ•´ RSC çš„å®Œæ•´æ¼”è¿›åŸç†
>
> **ğŸ‰ é‡è¦é‡Œç¨‹ç¢‘**ï¼š
> - âœ… æ‰‹å†™å®ç°äº†åŠŸèƒ½å®Œå–„çš„ RSC ç³»ç»Ÿ
> - âœ… æ·±å…¥ç†è§£äº†ç»„ä»¶åºåˆ—åŒ–å’Œ hydration
> - âœ… ä¸ºå®ç° ISR/SSR/Streaming æ‰“ä¸‹åšå®åŸºç¡€
> - ğŸ”œ å³å°†å®ç°å®Œæ•´çš„æ¸²æŸ“æ¶æ„æ¼”è¿›è·¯å¾„
